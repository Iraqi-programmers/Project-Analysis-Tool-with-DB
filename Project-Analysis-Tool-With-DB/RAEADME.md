# 📊 SpAnalyzerTool – SQL Stored Procedure Usage Analyzer

أداة ذكية لتحليل إجراءات SQL المخزنة (`Stored Procedures`) داخل ملفات `.bak` أو `.file` ومقارنتها مع استخداماتها الفعلية في مشروع C#، مع إمكانية حذف غير المستخدمة منها.

---

## 🚀 الميزات الأساسية

### 🔍 تحليل من ملف باك أب (`.bak`)
- استرجاع قاعدة بيانات مؤقتة من أي ملف `.bak` أو `.file`.
- استخراج جميع الإجراءات المخزنة (غير النظامية).

### 🧠 تحليل استخدام البروسيجرات داخل المشروع
- فحص جميع ملفات المشروع (`.cs`, `.sql`, `.txt`, `.config`).
- البحث الذكي باستخدام تعبيرات Regex لاستخراج أماكن استخدام البروسيجرات.
- تحديد عدد مرات الاستخدام، أسماء الملفات، وأول سطر يظهر فيه كل إجراء.

### 🖥️ واجهة استخدام تفاعلية
- عرض النتائج في واجهة جميلة بـ `WPF`.
- يدعم:
  - اسم الإجراء.
  - عدد مرات الاستخدام.
  - الملفات التي تحتويه.
  - رقم السطر.
- يمكن فتح الملف مباشرة في **Visual Studio** أو **Notepad**.

### 📤 التصدير
- تصدير النتائج إلى ملف نصي يتضمن أسماء الإجراءات وسطر استخدامها الأول.

### ❌ حذف البروسيجرات غير المستخدمة
- تحليل دقيق لتحديد الإجراءات غير المستخدمة.
- سؤال المستخدم قبل الحذف، مع:
  - خيار أخذ نسخة احتياطية من القاعدة الأصلية.
  - استخدام سلسلة اتصال قابلة للتخصيص.
  - حذف آمن يتم عبر أوامر SQL فقط للإجراءات غير المستخدمة.

### ⚙️ إعدادات قابلة للحفظ
- إعدادات محفوظة في ملف `settings.json`:
  - سلسلة الاتصال الافتراضية.
  - يتم تحميلها تلقائيًا عند فتح الواجهة وتعديلها حسب الحاجة.

---

## 📁 بنية المشروع

```plaintext
SpAnalyzerTool/
│
├── View/                # النوافذ وواجهات WPF
├── Helper/              # أدوات مثل الإعدادات والتحكم بالملفات
├── Models/              # النماذج مثل ProcedureUsageInfo و LocationInfo
├── settings.json        # إعدادات المستخدم
├── App.xaml             # الإعداد العام للتطبيق
└── MainMenu.xaml      # النافذة الرئيسية

🧪 المتطلبات
.NET 8 أو أعلى

صلاحية الوصول إلى SQL Server

Visual Studio (اختياري لفتح الملفات مباشرة)

⚠️ ملاحظات مهمة
يتم حذف قاعدة البيانات المؤقتة تلقائيًا بعد التحليل.

يرجى التأكد من أن ملفات الباك أب سليمة وأن مشروع C# يحتوي على جميع ملفات الكود المرتبطة بالاستدعاء.


🧑‍💻 المؤلف
Abu_Sanad
📧 Abotharhatem@gmail.com
📎 https://github.com/AbuTharHatem95




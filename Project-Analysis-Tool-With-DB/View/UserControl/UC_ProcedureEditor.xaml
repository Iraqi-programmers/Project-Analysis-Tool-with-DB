<UserControl x:Class="SpAnalyzerTool.View.UserControl.UC_ProcedureEditor"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:avalonedit="http://icsharpcode.net/sharpdevelop/avalonedit"
             mc:Ignorable="d" 
             d:DesignHeight="500" d:DesignWidth="900">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <!-- المحرر -->
            <RowDefinition Height="Auto"/>
            <!-- الأخطاء -->
            <RowDefinition Height="Auto"/>
            <!-- الأزرار -->
        </Grid.RowDefinitions>

        <!-- المحرر -->
        <Border CornerRadius="12"
                BorderThickness="2"
                BorderBrush="DarkGray"
                Background="White"
                Padding="5"
                Margin="0,0,0,10">
            <Border.Effect>
                <DropShadowEffect Color="Black"
                                  Opacity="0.1"
                                  BlurRadius="10"
                                  ShadowDepth="2"/>
            </Border.Effect>

            <avalonedit:TextEditor x:Name="SqlEditor"
                                   FontFamily="Consolas"
                                   FontSize="14"
                                   LineNumbersForeground="DarkKhaki"
                                   ShowLineNumbers="True"
                                   SyntaxHighlighting="SQL"
                                   HorizontalScrollBarVisibility="Auto"
                                   VerticalScrollBarVisibility="Auto"
                                   Focusable="True"
                                   Margin="5"/>
        </Border>

        <!-- الأخطاء -->
        <StackPanel Grid.Row="1" Margin="0,0,0,10" Name="spError" Visibility="Collapsed">
            <Border CornerRadius="12"
                    x:Name="bordErrorSummary"
                    BorderThickness="2"
                    BorderBrush="DarkGray"
                    Background="White"
                    Margin="0,0,0,-2"
                    Padding="5">
                <Border.Effect>
                    <DropShadowEffect Color="Black"
                                      Opacity="0.1"
                                      BlurRadius="10"
                                      ShadowDepth="2"/>
                </Border.Effect>

                <StatusBar>
                    <StatusBarItem >
                        <TextBlock x:Name="txtErrorSummary" FontWeight="Bold"/>
                    </StatusBarItem>
                </StatusBar>
            </Border>


            <Border CornerRadius="12"
                    x:Name="bordgv"
          BorderThickness="2"
          BorderBrush="DarkGray"
          Background="White"
          Padding="5">
                <Border.Effect>
                    <DropShadowEffect Color="Black"
                            Opacity="0.1"
                            BlurRadius="10"
                            ShadowDepth="2"/>
                </Border.Effect>

                <DataGrid x:Name="dgErrors"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      HeadersVisibility="Column"
                      IsReadOnly="True"
                      Margin="0,2,0,0"
                      BorderThickness="0"
                          
                      Height="100"
                      Visibility="Collapsed">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="السطر" Binding="{Binding Line}" Width="Auto"/>
                        <DataGridTextColumn Header="النوع" Binding="{Binding Level}" Width="Auto"/>
                        <DataGridTextColumn Header="الرسالة" Binding="{Binding Message}" Width="*" />
                        <DataGridTextColumn Header="الاقتراح" Binding="{Binding SuggestedText}" Width="*" />
                    </DataGrid.Columns>
                </DataGrid>

            </Border>


        </StackPanel>

        <!-- الأزرار -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
            <Button Content="💾 حفظ"
                    Width="180"
                    Height="40"
                    Margin="5"
                    FontSize="14"
                    FontWeight="Bold"
                    Click="SaveProcedure_Click"/>

            <Button Content="❌ إغلاق"
                    Width="180"
                    Height="40"
                    FontWeight="Bold"
                    FontSize="14"
                    Margin="5"
                    Click="Exit"/>
        </StackPanel>

    </Grid>
</UserControl>
